(()=>{"use strict";var e,t,n,o,i,r,s,a,c={212391:(e,t,n)=>{n.d(t,{join:()=>C});var o=n(575753),i=n(237625),r=n(560377),s=n(396858),a=n(939646),c=n(672277),l=n(754866),d=n(683234),u=n(593159),_=n(972332),g=n(270959),h=n(246429),m=n(866467),p=n(342879),b=n(314309),S=n(175661),E=n(832677),v=n(731906),w=n(961678),I=n(152420),f=n(510973),y=n(540462),R=n(810068);function j(e,t){cur[`${e}IsDirty`]||(cur[`${e}IsDirty`]=!0,t())}function k(){cur?.fbSign&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.FACEBOOK_REGISTRATION,b.EventFieldValues.REGISTERED_VIA_FB)}function T(){const e=(0,l.ge)("join_phone");e&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.PHONE_NUMBER,e.value,!0),cur?.uiPhoneCountry&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.PHONE_COUNTRY,cur.uiPhoneCountry.val(),!0)}const C={setFBSign(){window.cur.fbSign=!0},isCountryVisible(){return!this.isCountryHidden()},isCountryHidden:()=>(0,y.partConfigEnabled)("onboarding_skip_country"),show(e){(0,l.isVisible)(e)||(0,a.slideDown)(e,150)},hide(e){(0,l.isVisible)(e)&&(0,a.slideUp)(e,150)},scrollnode:()=>window,scrollResize(e,t){if(o.browser.mobile&&!o.browser.safari_mobile)return;const n=(0,c.scrollGetY)();!0===t&&(cur.nextButtonTop=(0,l.getXY)(cur.nextButtonWrap)[1],o.browser.msie6&&(cur.nextButtonTop+=n));const i=cur.resultShown&&n+lastWindowHeight<cur.nextButtonTop+cur.nextButtonHeight+(0,u.intval)((0,l.getStyle)("content","marginTop"))+(0,l.ge)("page_header_cont").offsetHeight-8;i&&!cur.docked?((0,l.addClass)(cur.nextButton,"fixed"),cur.docked=!0):!i&&cur.docked&&((0,l.removeClass)(cur.nextButton,"fixed"),o.browser.msie6&&cur.nextButtonWrap.appendChild(cur.nextButton),cur.docked=!1),cur.docked&&e&&"resize"===e.type&&(o.browser.msie6?cur.nextButton.style.left=(0,l.getXY)((0,l.ge)("content"))[0]+"px":(cur.nextButton.style.left=(0,l.ge)("page_layout").offsetLeft+(0,l.ge)("content").offsetLeft+"px",setTimeout(C.nextResetStyle,0)))},nextResetStyle(){cur.nextButton.style.left=""},initScroll(){(0,u.extend)(cur,{nextButton:(0,l.ge)("join_"+cur.section+"_next"),nextButtonWrap:(0,l.ge)("join_"+cur.section+"_next_wrap"),resultEl:(0,l.ge)("join_"+cur.section+"_result")}),cur.nextButtonHeight=(0,l.getSize)(cur.nextButton)[1],cur.nextButtonWrap.style.height=cur.nextButtonHeight+"px",cur.resultShown=(0,l.isVisible)(cur.resultEl),C.scrollResize(!1,!0),(0,_.addEvent)(C.scrollnode(),"scroll",C.scrollResize),(0,_.addEvent)(window,"resize",C.scrollResize),cur.destroy.push((e=>{(0,_.removeEvent)(C.scrollnode(),"scroll",C.scrollResize),(0,_.removeEvent)(window,"resize",C.scrollResize),o.browser.msie6&&e.nextButtonWrap.appendChild(e.nextButton)}))},initStatsPhoneVerify(){const e=(0,l.ge)("join_called_phone"),t=(0,l.ge)("join_called_code"),n=(0,l.ge)("join_code"),o=()=>{cur.isCalledPhoneElDirty||(S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.INPUT_CODE_INTERACTION,cur.eventScreen),cur.isCalledPhoneElDirty=!0)};T(),S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.SMS_CODE,n.value,!0),cur.statsPhoneVerifyInited||(e.addEventListener("keyup",(()=>{S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.SMS_CODE,e.value),o()})),t.addEventListener("keyup",(()=>{S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.SMS_CODE,t.value),o()})),n.addEventListener("keyup",(()=>{S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.SMS_CODE,n.value),o()})),cur.statsPhoneVerifyInited=!0)},initStatsPhone(){const e=(0,l.ge)("join_phone");S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.PHONE_NUMBER,e.value,!0),cur.statsPhoneInited||(e.addEventListener("keyup",(()=>{S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.PHONE_NUMBER,e.value),cur.isPhoneElDirty||(S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.INPUT_NUMBER_INTERACTION,cur.eventScreen),cur.isPhoneElDirty=!0)})),cur.statsPhoneInited=!0)},initStatsPassword(){const e=(0,l.ge)("join_pass");S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.PASSWORD,e.value,!0),cur.statsPasswordInited||(e.addEventListener("keyup",(()=>{S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.PASSWORD,e.value)})),cur.statsPasswordInited=!0)},initStatsRules(){const e=(0,l.ge)("join_accept_terms_checkbox");S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.RULES_ACCEPT,C.policyChecked()+"",!0),cur.statsRulesInited||(e.addEventListener("click",(()=>{S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.RULES_ACCEPT,C.policyChecked()+"")})),cur.statsRulesInited=!0)},initStats(){cur.eventScreen=b.EventScreens.REGISTRATION_PHONE,((0,l.isVisible)("join_code_row")||(0,l.isVisible)("join_called_phone_row")||(0,l.isVisible)("join_called_code_row"))&&(cur.eventScreen=b.EventScreens.REGISTRATION_PHONE_VERIFY),(0,l.isVisible)("join_pass_row")&&(cur.eventScreen=b.EventScreens.REGISTRATION_PASSWORD),"done"===nav.objLoc.act&&(cur.eventScreen=b.EventScreens.REGISTRATION_COMPLETE),"contacts"===nav.objLoc.act&&(cur.eventScreen=b.EventScreens.REGISTRATION_COUNTRY),"education"===nav.objLoc.act&&(cur.eventScreen=b.EventScreens.REGISTRATION_EDUCATION),"email"===nav.objLoc.act&&(cur.eventScreen=b.EventScreens.REGISTRATION_EMAIL),"avatar"===nav.objLoc.act&&(cur.eventScreen=b.EventScreens.REGISTRATION_PHOTO),cur.eventScreen===b.EventScreens.REGISTRATION_PHONE&&(C.initStatsPhone(),C.initStatsRules()),cur.eventScreen===b.EventScreens.REGISTRATION_PHONE_VERIFY&&(C.initStatsPhoneVerify(),C.initStatsRules()),cur.eventScreen===b.EventScreens.REGISTRATION_PASSWORD&&(C.initStatsPassword(),C.initStatsRules()),this.isCountryVisible()&&cur.eventScreen===b.EventScreens.REGISTRATION_COUNTRY&&(S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.COUNTRY,`${cur.uiCountry.val()}`,!0),S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.CITY,`${cur.uiCity.val()}`,!0)),cur.eventScreen===b.EventScreens.REGISTRATION_EDUCATION&&(S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.COUNTRY,`${cur.selData.country_val[0]}`,!0),S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.CITY,`${cur.selData.city_val[0]}`,!0),S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.GRADUATION,"",!0),cur.isSchool?(S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.SCHOOL,"",!0),S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.YEAR_FROM,"",!0),S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.YEAR_TO,"",!0),S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.CLASS,"",!0),S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.SPECIALIZATION,"",!0)):(S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.UNIVERSITY,"",!0),S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.FACULTY,"",!0),S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.CHAIR,"",!0),S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.EDU_FORM,"",!0),S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.EDU_STATUS,"",!0))),cur.eventScreen===b.EventScreens.REGISTRATION_EMAIL&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.EMAIL,"",!0)},showProgress(){if((0,l.isVisible)(cur.resultEl)){const e=(0,l.ge)("join_"+cur.section+"_summary");e.lastChild&&(0,l.hasClass)(e.lastChild,"progress_inline")||e.appendChild((0,l.ce)("span",{className:"progress_inline join_summary_prg"}))}else(0,l.show)("join_"+cur.section+"_none_prg"),cur.noneEl.style.visibility="hidden"},hideProgress(){if((0,l.isVisible)(cur.resultEl)){const e=(0,l.ge)("join_"+cur.section+"_summary");e.lastChild&&(0,l.hasClass)(e.lastChild,"progress_inline")&&(0,l.re)(e.lastChild)}else cur.noneEl.style.visibility="",(0,l.hide)("join_"+cur.section+"_none_prg")},addFriendLogged:function(e,t,n){j(b.RegistrationFieldItemNames.FRIEND_ASK,(function(){S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.FRIEND_ASK,"1"),S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.FIRST_FRIEND_ASK,b.EventScreens.REGISTRATION_LIST_FRIENDS_FACEBOOK,void 0,{force:!0})})),ajax.post("al_friends.php",{act:"add",mid:t,hash:n,from:"fb_sign"},{onDone:()=>{(0,l.hide)("join_add"+t),(0,l.show)("join_request"+t)},showProgress:()=>(0,d.lockButton)(e),hideProgress:()=>(0,d.unlockButton)(e)})},removeFriendLogged:function(e,t,n){ajax.post("al_friends.php",{act:"remove",mid:t,hash:n,from:"fb_sign"},{onDone:()=>{(0,l.show)("join_add"+t),(0,l.hide)("join_request"+t)},showProgress:()=>(0,d.lockButton)(e),hideProgress:()=>(0,d.unlockButton)(e)})},isPhoneCall(){const e=parseInt(cur.validationType,10);return 3===e||4===e},isPhoneCallStrict:()=>3===parseInt(cur.validationType,10),phoneDone:function(e,t){if(e){const n=(0,l.ge)("join_phone");cur.uiPhoneCountry&&cur.uiPhoneCountry.val(t,!0),(0,l.val)(n,e),n.readOnly=!0,cur.uiPhoneCountry&&(cur.uiPhoneCountry.disable(!0),(0,l.addClass)("join_phone_prefixed","join_readonly_wrap")),(0,l.addClass)(n,"join_readonly")}cur.resendInt&&clearInterval(cur.resendInt),cur.resendInt=setInterval(C.resendUpdate,1e3),(0,l.show)("join_code_submit","join_other_phone","join_resend"),(0,l.hide)("join_phone_submit"),C.isPhoneCall()?((0,l.val)((0,l.ge)("join_called_phone_prefix").firstChild,""),(0,l.val)("join_called_phone",""),(0,l.hide)("join_code_row"),(0,l.hide)("join_called_code_row"),(0,a.slideDown)("join_called_phone_row",150,l.elfocus.pbind("join_called_phone"))):(0,l.isVisible)("join_called_phone_row")||(0,l.isVisible)("join_called_code_row")?((0,l.hide)("join_called_phone_row"),(0,l.show)("join_code_row"),setTimeout(l.elfocus.pbind("join_code"),100)):(0,a.slideDown)("join_code_row",150,l.elfocus.pbind("join_code")),(0,l.val)("join_submit_result",""),(0,l.val)("join_code",""),C.initPhoneCode()},checkStatus:function(e,t){const n=(0,h.curBox)(),o=n?n.showProgress:d.lockButton.pbind("join_send_phone"),i=n?n.hideProgress:d.unlockButton.pbind("join_send_phone");if(cur.checkingStatus){if(cur.checkingStatus<0)o(),cur.checkingStatus=1;else if(++cur.checkingStatus,cur.checkingStatus>4)return cur.checkingStatus=-1,i(),C.phoneDone(e,t)}else o(),cur.checkingStatus=1,cur.destroy.push((function(){clearTimeout(cur.checkingTimer),i()}));cur.checkingTimer=setTimeout(ajax.post("join.php",{act:"phone_check"},{onDone:n=>{if(n||cur.checkingStatus>3)return cur.checkingStatus=-1,i(),C.phoneDone(e,t);cur.checkingTimer=setTimeout(C.checkStatus.pbind(e,t),2e3)},onFail:n=>(cur.checkingStatus=-1,i(),n?(C.showMsg("join_submit_result",n,l.elfocus.pbind("join_phone")),!0):C.phoneDone(e,t))}),1e3)},submitPhone:e=>{if(!e&&(0,d.isButtonLocked)("join_send_phone"))return;if(!C.policyChecked())return void(0,d.notaBene)("join_accept_terms_checkbox");const t=(0,l.ge)("join_phone"),n=C.getPhone(),o=(0,l.val)("join_phone"),i=!!cur.uiPhoneCountry&&cur.uiPhoneCountry.val_full();if(t.disabled)return(0,l.elfocus)("join_code");ajax.post("join.php",{act:"phone",phone:n,hash:cur.hash},{showProgress:d.lockButton.pbind("join_send_phone"),hideProgress:d.unlockButton.pbind("join_send_phone"),onDone:(e,t,n,r,s)=>{if(e)return(0,d.lockButton)("join_send_phone"),void setTimeout(C.submitPhone.pbind(!0),1e3);if(cur.strongCode!==n){const e=(0,l.ge)("join_code").tt;e&&e.destroy(),cur.strongCode=n}cur.validationType=s,cur.resendDelay=r,C.phoneDone(o,i),C.resendUpdate();const a=(0,l.isVisible)("join_code_submit")?b.EventScreens.REGISTRATION_PHONE:cur.eventScreen;k(),S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SCREEN_PROCEED,a??b.EventScreens.REGISTRATION_PHONE,b.EventScreens.REGISTRATION_PHONE_VERIFY);const c=cur.uiPhoneCountry.val();String(cur.defCountry)!==String(c)&&(S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.SELECT_COUNTRY_NAME,c),S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.PROCEED_OTHER_COUNTRY_CODE,cur.eventScreen)),C.initStats()},onFail:e=>{if(!e)return;const t=(0,l.ge)("join_phone");return t&&t.tt&&t.tt.hide&&t.tt.hide({fasthide:!0}),C.showMsg("join_submit_result",e,l.elfocus.pbind("join_phone")),!0}})},getStrength(e){let t=-1;const n=["qwerty","йцукен","gfhjkm","пароль","password","abc123","fuckyou","123abc","baseball","football","soccer","monkey","liverpool","princess","jordan","slipknot","superman","iloveyou"];if(e!==e.replace(/\s/g,"")&&((0,l.val)("join_pass",e=e.replace(/\s/g,"")),(0,l.elfocus)("join_pass")),e.length<6)t=0;else if(e.match(/^\d+$/)||(0,u.indexOf)(n,e)>=0||e.substr(-1).match(/\d/)&&n.indexOf(e.substr(0,e.length-1))>=0)t=1;else{const n=[/[^a-z]/g,/[^A-Z]/g,/[^а-яё]/g,new RegExp("[^А-ЯЁ]","g"),/[^0-9]/g,new RegExp("[a-zA-Zа-яА-ЯёЁ0-9]","g")];let o=[],i=0;for(let t=0,r=n.length;t<r;++t){const r=e.replace(n[t],"").length;r&&(r>1&&++i,o.push({group:t,cnt:r}))}if(o.length<3&&parseInt(o[o.length-1].group,10)!==n.length-1&&i<2&&(t=2),(i>2||o.length>2&&parseInt(o[o.length-1].group,10)===n.length-1)&&(t=4),t<0&&i>1){const o=e.replace(n[n.length-1],"");o.length>1&&o.replace(new RegExp((0,u.escapeRE)(o.charAt(0)),"g"),"").length&&(t=4)}t<0&&(t=3),t&&t<3&&e.length>13&&++t}return t},updateStrength(){let e=(0,l.val)("join_pass"),t=C.getStrength(e);(0,l.ge)("join_about_pass").className="join_pwd_level"+t,(0,l.ge)("join_pass_strength").innerHTML=e?(0,m.getLang)("join_pwd_level"+t):(0,m.getLang)("join_pwd_min_length"),setQuickLoginData(cur.fbSign&&cur.fbValid?cur.fbEmail:C.getPhone(),e,{params:cur.joinParams})},initPhoneCode(){cur.codeForm||(setQuickLoginData(C.getPhone(),"",{params:cur.joinParams}),utilsNode.appendChild((0,l.ce)("div",{innerHTML:`\n<form method="POST" action="${vk.loginscheme}://${cur.loginHost}/?act=check_code&_origin=${locProtocol}//${locHost}" id="join_code_form" name="join_code_form" target="join_code_frame">\n  <input type="hidden" name="email" id="join_code_phone" />\n  <input type="hidden" name="code" id="join_code_code" />\n  <input type="hidden" name="call" id="join_code_call" />\n  <input type="hidden" name="recaptcha" id="join_code_recaptcha" />\n  <input type="hidden" name="captcha_sid" id="join_code_sid" />\n  <input type="hidden" name="captcha_key" id="join_code_key" />\n</form>\n<iframe id="join_code_frame" name="join_code_frame"></iframe>\n`})),cur.codeForm=(0,l.ge)("join_code_form"),cur.codeFrame=(0,l.ge)("join_code_frame"))},validatePaste:e=>{let t=(e||window).clipboardData.getData("Text").replace(/[^0-9]/g,"");const n=(0,l.ge)("join_phone"),o=(0,l.ge)("join_phone_prefix").firstChild;if(t.length<11)return;const i=t.slice(0,2);89!=i&&87!=i||(t="7"+t.slice(1));for(let i of cur.countries){const r=i[3].slice(1),s=r.length;if(t.slice(0,s)===r)return cur.uiPhoneCountry.val(i[0]),(0,l.val)(o,i[3].toString()),(0,l.val)(n,t.slice(s)),(0,_.cancelEvent)(e)}},initPhoneCountry:function(e,t){cur.countries=e,cur.defCountry=t;const n=(0,l.ge)("join_phone_country"),o=!!+n.dataset.vkConnectIntegration;cur.uiPhoneCountry=new Dropdown(n,cur.countries,{selectedItems:t,big_text:!0,disablePlaceholder:!0,liteEventsBind:!0,autocomplete:!0,multiselect:!1,onShow:function(){S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SELECT_COUNTRY,cur.eventScreen)},onChange:function(e){const t=(0,l.ge)("join_phone"),n=(0,l.ge)("join_phone_prefix").firstChild,i=cur.uiPhoneCountry.val_full()[3];if(t.readOnly||0===e||"0"===e||""===e||!1===e||void 0===e){const e=(0,l.val)(n);if(i==e)return;for(let t=0,n=cur.countries.length;t<n;++t)if(cur.countries[t][3]==e)return cur.uiPhoneCountry.val(cur.countries[t]);return cur.uiPhoneCountry.val(cur.defCountry,!0)}(0,l.val)(n,i),o||C.updatePolicyLink(cur.uiPhoneCountry.val()),S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.SELECT_COUNTRY_NAME,cur.uiPhoneCountry.val()),S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SELECT_COUNTRY_DONE,cur.eventScreen),S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.PHONE_COUNTRY,cur.uiPhoneCountry.val())}}),(0,l.ge)("join_phone").readOnly?cur.uiPhoneCountry.disable(!0):S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.PHONE_COUNTRY,cur.uiPhoneCountry.val(),!0),cur.destroy.push(cur.uiPhoneCountry.destroy.bind(cur.uiPhoneCountry))},getPhone(){const e=(0,u.trim)((0,l.val)("join_phone"));return(0,u.trim)((0,l.val)(((0,l.ge)("join_phone_prefix")||{}).firstChild)||"")+e},submitPhoneCode(){if(!cur.codeForm||(0,d.isButtonLocked)("join_send_code"))return;if(!C.policyChecked())return void(0,d.notaBene)("join_accept_terms_checkbox");let e,t,n;C.isPhoneCall()?(e="join_called_phone",t="join_called_phone_prefixed",n=cur.calledPhoneLen):(e="join_code",t=e,n=5);const o=(0,u.trim)((0,l.val)(e)).replace(/[^a-z0-9]/g,"");if(o.length<n)return(0,d.notaBene)(t);if("05937"===o)return C.showMsg("join_submit_result",(0,m.getLang)("join_sorry_code"),l.elfocus.pbind("join_code",!1,!1));if((0,l.val)("join_code_phone",C.getPhone()),(0,l.val)("join_code_code",o),C.isPhoneCall()){const e=Number(vk.id);(0,l.val)("join_code_call",isNaN(e)||R.Ranges.isZeroOwner(e)?(0,s.getCookie)("remixnreg_sid"):-vk.id)}(0,d.lockButton)("join_send_code"),cur.codeForm.submit()},policyChecked(){const e=(0,l.geByClass1)("checkbox","join_accept_terms_checkbox");return(0,d.isChecked)(e)},togglePhoneSubmit(){let e=C.policyChecked();(0,d.disableButton)((0,l.ge)("join_send_phone"),!e),(0,d.disableButton)((0,l.ge)("join_send_code"),!e),(0,d.disableButton)((0,l.ge)("join_send_pass"),!e)},askPassword(e,t){(0,h.curBox)()&&(0,h.curBox)().hide(),cur.sureBoxText=t,(0,d.unlockButton)("join_send_code"),(0,l.val)("join_code",(0,l.val)("join_code_code"));const n=cur.joinParams&&cur.joinParams.facebook;cur.joinParams={join_code:(0,l.val)("join_code"),join_hash:e},n&&(cur.joinParams.facebook=1),C.isPhoneCall()?((0,l.ge)("join_called_phone").readOnly=!0,(0,l.addClass)((0,l.ge)("join_called_phone"),"join_readonly"),(0,l.addClass)((0,l.ge)("join_called_phone_prefixed"),"join_readonly_wrap")):((0,l.ge)("join_code").readOnly=!0,(0,l.addClass)((0,l.ge)("join_code"),"join_readonly")),(0,l.show)("join_pass_submit"),(0,l.hide)("join_other_phone","join_code_submit","join_resend","join_country_row"),(0,a.slideDown)("join_pass_row",150,l.elfocus.pbind("join_pass")),(0,l.val)("join_submit_result",""),k(),T(),S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SCREEN_PROCEED,cur.eventScreen,b.EventScreens.REGISTRATION_PASSWORD),C.initStats()},askCaptcha(e,t,n){cur.codeForm&&((0,d.unlockButton)("join_send_code"),2===parseInt(t,10)?window.badCodeBox=(0,g.showReCaptchaBox)(e,n,window.badCodeBox,{onSubmit:(e,t)=>{(0,l.val)("join_code_recaptcha",e),cur.codeForm.submit()},onHide:()=>{window.badCodeBox=!1}}):window.badCodeBox=(0,g.showCaptchaBox)(e,n,window.badCodeBox,{onSubmit:(e,t)=>{(0,l.val)("join_code_sid",e),(0,l.val)("join_code_key",t),cur.codeForm.submit()},onHide:()=>{window.badCodeBox=!1}}))},submitPasswordSure(){(0,g.showFastBox)((0,m.getLang)("join_new_page_sure_title"),(0,m.getLang)("join_new_page_sure"),(0,m.getLang)("join_new_page_sure_submit"),C.submitPassword.pbind(-1),(0,m.getLang)("global_cancel"))},submitPassword(e,t){if((0,d.isButtonLocked)("join_send_pass")&&!cur.submitOnSign)return;if(!C.policyChecked())return void(0,d.notaBene)("join_accept_terms_checkbox");let n,o;if(!0===t)n="000000";else if(n=(0,l.val)("join_pass"),n.length<6||C.getStrength(n)<3)return(0,d.notaBene)("join_pass");if(!cur.sureBoxText||1===e||-1===e)return cur.joinParams.join_to_already=(0,u.intval)(e),cur.fbSign&&!cur.fbSigned?(cur.submitOnSign=1,(0,d.lockButton)("join_send_pass")):(window._oldOnLoginFailed||(window._oldOnLoginFailed=window.onLoginFailed,window._oldOnLoginDone=window.onLoginDone,cur.destroy.push((()=>{window.onLoginFailed=window._oldOnLoginFailed,window.onLoginDone=window._oldOnLoginDone,window._oldOnLoginFailed=!1,window._oldOnLoginDone=!1}))),window.onLoginFailed=(e,t)=>{(0,I.joinLogProgress)(w.JoinProgressLog.SCREEN_FINISH,w.JoinProgressLog.STATUS_ERROR,w.JoinProgressLog.ERROR_PASSWORD),S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.INCORRECT_PASSWORD,cur.eventScreen),-1===e?location.href=location.href.replace(/^http:/,"https:"):4===e?location.href="/login?m=1&email="+t.email:7===e?location.href="/join?act=finish&m=1":10===e?((0,d.lockButton)("join_send_pass"),setTimeout(submitQuickLoginForm.pbind(o,n,{prg:"join_send_pass",params:cur.joinParams}),1e3)):nav.reload()},window.onLoginDone=nav.go.pbind("join?act=done"),cur.fbSign&&(cur.fbValid||!0===t)?(o=cur.fbEmail,cur.joinParams.fb_id=cur.fbId):(o=C.getPhone(),k(),S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SCREEN_PROCEED,cur.eventScreen,b.EventScreens.REGISTRATION_COMPLETE)),void submitQuickLoginForm(o,n,{prg:"join_send_pass",params:cur.joinParams}));(0,g.showFastBox)({title:(0,m.getLang)("join_sure_detach"),hideButtons:!0,width:560,noCloseButton:!0},cur.sureBoxText).changed=!0},showMsg(e,t,n,o){const i=(0,l.ge)(e);(0,r.showMsg)(i,t,o||"error",!0),(0,u.isFunction)(n)&&n()},codeFailed(e,t){(0,h.curBox)()&&(0,h.curBox)().hide(),(0,d.unlockButton)("join_send_code");let n,o=(0,m.getLang)("join_wrong_code");(e=(0,u.intval)(e))<0?(o=(0,m.getLang)("join_code_failed"),C.changePhone()):e&&e<6&&(o+="<br>"+(0,m.getLang)("join_tries_left").replace("{count}","<b>"+e+"</b>")),C.isPhoneCall()&&(0,l.isVisible)("join_called_phone_prefix")?(n="join_called_phone",(0,l.val)((0,l.ge)("join_called_phone_prefix").firstChild,t)):n="join_code",C.showMsg("join_submit_result",o,l.elfocus.pbind(n)),S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.INCORRECT_SMS_CODE,cur.eventScreen),window._oldOnLoginFailed&&(window.onLoginFailed=window._oldOnLoginFailed)},resendUpdate(){let e,t;C.isPhoneCallStrict()?(e=(0,m.getLang)("join_send_code_sms_time"),t=(0,m.getLang)("join_send_code_sms")):(e=(0,m.getLang)("join_resend_sms_time"),t=(0,m.getLang)("join_no_sms")),cur.resendDelay>0?((0,l.val)("join_resend",e.replace("%s",Math.floor(cur.resendDelay/60)+":"+(cur.resendDelay%60<10?"0":"")+cur.resendDelay%60)),cur.resendDelay--):-1===parseInt(cur.resendDelay,10)?((0,l.val)("join_resend",""),clearInterval(cur.resendInt)):((0,l.val)("join_resend",'<a id="join_resend_lnk" onclick="return Join.noCode()">'+t+"</a>"),clearInterval(cur.resendInt))},noCode(){const e=(0,l.ce)("span",{className:"progress_inline"}),t=(0,l.ge)("join_resend_lnk"),n=t.parentNode;return ajax.post("join.php",{act:"resend",hash:cur.hash},{showProgress:()=>{t.parentNode===n&&n.replaceChild(e,t)},hideProgress:()=>{e.parentNode===n&&n.replaceChild(t,e)},onDone:function(e,t,n,o){1===parseInt(e,10)?(cur.validationType=e,cur.resendDelay=t,C.phoneDone(),S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.RESEND_SMS_CODE,cur.eventScreen)):t&&n?((0,l.val)("join_submit_result",""),(0,g.showFastBox)({title:e,width:450,noCloseButton:!0},t,n,C.call,o).changed=!0,S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.RESEND_SMS_CODE,cur.eventScreen)):t?((0,l.val)("join_submit_result",""),(0,g.showFastBox)({title:e,width:450},t),S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.RESEND_SMS_CODE,cur.eventScreen)):(C.showMsg("join_submit_result",e),S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.RESEND_SMS_CODE_FAILED,cur.eventScreen))}}),!1},changePhone(){const e=(0,l.ge)("join_phone");e.readOnly=!1,(0,l.removeClass)(e,"join_readonly"),cur.uiPhoneCountry&&(cur.uiPhoneCountry.disable(!1),cur.uiPhoneCountry.val(cur.uiPhoneCountry.val(),!0),(0,l.removeClass)("join_phone_prefixed","join_readonly_wrap")),(0,l.show)("join_phone_submit","join_country_row"),(0,l.hide)("join_code_submit","join_other_phone","join_resend"),(0,a.slideUp)(C.isPhoneCall()?"join_called_phone_row":"join_code_row",150),(0,l.val)("join_phone",""),(0,l.elfocus)("join_phone"),S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SCREEN_RETURN,cur.eventScreen,b.EventScreens.REGISTRATION_PHONE),C.initStats()},call(){ajax.post("join.php",{act:"call",hash:cur.hash},{progress:(0,h.curBox)().progress,onDone:(e,t)=>{(0,h.curBox)().hide(),cur.validationType=t,S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.RESEND_SMS_CODE,cur.eventScreen),C.isPhoneCall()?C.phoneDone():(0,l.elfocus)("join_code"),C.showMsg("join_submit_result",e)}})},tipShow(e,t,n,o){const i=(0,l.ge)(e),r=()=>{(0,p.showTooltip)(i,{text:t,dir:"left",slideX:15,className:"join_finish_tt"+(o?" "+o:""),shift:n,onCreate:_.removeEvent.pbind(e,"mouseout")})};vk.loaded?setTimeout(r,0):(0,_.addEvent)(window,"load",r)},tipHide(){const e=["join_phone","join_code","join_pass","join_called_phone"];e.map((t=>{const n=(0,l.ge)(e[t]);n&&n.tt&&n.tt.hide&&n.tt.hide()}))},phoneTip(e){const t=(0,l.ge)("join_phone"),n=(0,l.getSize)(t);t.readOnly||C.tipShow(t,e,[-(n[0]+10),-Math.floor(n[1]/2)],"join_phone_tt")},passTip(){const e=(0,l.ge)("join_pass"),t=(0,l.getSize)(e);return C.tipShow(e,(0,m.getLang)("join_pass_tip"),[-(t[0]+10),-Math.floor(t[1]/2)])},switchToDefSign(e,t){ajax.post("join.php",{act:"logout",hash:e,noredir:1},{onDone:()=>{(0,g.showBox)("join.php",{act:"box",from:nav.strLoc,nofb:1})},showProgress:d.lockButton.pbind(t),hideProgress:d.unlockButton.pbind(t)})},initContacts(){let e;selectsData.setCountries(cur.selData.countries),selectsData.setCities(cur.selData.country,cur.selData.cities),cur.selData.city_val=cur.selData.city_val||["",""],cur.selData.country_val=cur.selData.country_val||["",""];const t={progressBar:(0,l.ge)("pedit_progress"),city:cur.selData.city_val,country:cur.selData.country,maxItemsShown:e=>e>6?500:350,onChange:t=>{t!==e&&(e=t,S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.CITY,`${t}`),C.isCountryHidden()&&j(b.RegistrationFieldItemNames.CITY,(function(){S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.FIRST_COUNTRY,cur.eventScreen)})))},dark:1,width:280,ignoreCountry:C.isCountryHidden()};C.isCountryHidden()&&(t.placeholder=(0,m.getLang)("reg_enter_city")),cur.uiCity=new CitySelect((0,l.ge)("pedit_city"),(0,l.ge)("pedit_city_row"),t),e=(0,u.intval)(cur.uiCity.val()),C.isCountryVisible()&&(cur.uiCountry=new CountrySelect((0,l.ge)("pedit_country"),(0,l.ge)("pedit_country_row"),{progressBar:(0,l.ge)("pedit_progress"),country:cur.selData.country_val,citySelect:cur.uiCity,onChange:e=>{S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.COUNTRY,`${e}`),j(b.RegistrationFieldItemNames.PHONE_COUNTRY,(function(){S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.FIRST_COUNTRY,cur.eventScreen)})),C.checkSave(e)},dark:1,width:280}),C.checkSave((0,l.ge)("pedit_country").value)),C.initStats()},submitContacts(e=f.JoinScreenFlow.DEFAULT_FLOW){let t="0";this.isCountryVisible()&&(t=(0,l.ge)("pedit_country").value);const n={act:"check_contacts",hash:cur.saveHash,country:t,city:(0,l.ge)("pedit_city").value};if(!n.country)return(0,I.joinLogProgress)(w.JoinProgressLog.SCREEN_CONTACTS,w.JoinProgressLog.STATUS_ERROR,w.JoinProgressLog.ERROR_EMPTY_CONTACTS),C.showMsg("join_submit_result",(0,m.getLang)("join_need_contacts")),!0;const o=new f.JoinScreenFlow(cur.eventScreen,e).nextScreen(),i=(0,l.ge)("join_save");ajax.post("join.php",n,{onDone:()=>{k(),S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SCREEN_PROCEED,cur.eventScreen,o.screen_to),nav.go(o.url_to)},onFail:e=>(C.showMsg("join_submit_result",e),!0),showProgress:()=>(0,d.lockButton)(i),hideProgress:()=>(0,d.unlockButton)(i)})},initEducation(){selectsData.setCountries(cur.selData.countries),selectsData.setCities(cur.selData.country,cur.selData.cities),cur.selData.city_val=cur.selData.city_val||["",""],cur.selData.country_val=cur.selData.country_val||["",""];const e=(0,l.ge)("edu"),t={id:0,width:280,city:cur.selData.city,city_val:cur.selData.city_val,country:cur.selData.country,country_val:cur.selData.country_val};if(cur.isSchool){let n={school0country:cur.selData.country_val[0],school0city:cur.selData.city_val[0]};e.appendChild(ProfileEditorEdu.genSchoolRow(0)),ProfileEditorEdu.initSchoolRow(t,null,(e=>{j(b.RegistrationFieldItemNames.CLASS,(function(){S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.FIRST_EDUCATION,cur.eventScreen)})),C.checkSave(e)}),(()=>{const e=ProfileEditorEdu.addSchoolParams({},{id:0},"school0");n.school0country!=e.school0country&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.COUNTRY,`${e.school0country}`||""),n.school0city!=e.school0city&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.CITY,e.school0city||""),n.school0graduation!=e.school0graduation&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.GRADUATION,e.school0graduation||""),n.school0school!=e.school0school&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.SCHOOL,e.school0school||""),n.school0start!=e.school0start&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.YEAR_FROM,e.school0start||""),n.school0finish!=e.school0finish&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.YEAR_TO,e.school0finish||""),n.school0class!=e.school0class&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.CLASS,e.school0class||""),n.school0custom_spec!=e.school0custom_spec&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.SPECIALIZATION,e.school0custom_spec||""),n=e})),C.checkSave((0,l.ge)("s_school0").value),(0,_.addEvent)((0,l.ge)("s_spec0_custom"),"keydown",(function(e){10!=e.keyCode&&13!=e.keyCode||C.submitEducation()}))}else{let n={primary_unicountry:cur.selData.country_val[0],primary_unicity:cur.selData.city_val[0]};e.appendChild(ProfileEditorEdu.genUniRow(0));const o={};C.isCountryHidden()&&(o.placeholderForCity=(0,m.getLang)("reg_enter_city")),ProfileEditorEdu.initUniRow(t,null,(e=>{j(b.RegistrationFieldItemNames.EDU_FORM,(function(){S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.FIRST_EDUCATION,cur.eventScreen)})),C.checkSave(e)}),(()=>{const e=ProfileEditorEdu.addUniParams({},{id:0},"primary_uni");n.primary_unicountry!=e.primary_unicountry&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.COUNTRY,e.primary_unicountry||""),n.primary_unicity!=e.primary_unicity&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.CITY,e.primary_unicity||""),n.primary_unigraduation!=e.primary_unigraduation&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.GRADUATION,e.primary_unigraduation||""),n.primary_uniuniversity!=e.primary_uniuniversity&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.UNIVERSITY,e.primary_uniuniversity||""),n.primary_unifaculty!=e.primary_unifaculty&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.FACULTY,e.primary_unifaculty||""),n.primary_unichair!=e.primary_unichair&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.CHAIR,e.primary_unichair||""),n.primary_uniedu_form!=e.primary_uniedu_form&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.EDU_FORM,e.primary_uniedu_form||""),n.primary_uniedu_status!=e.primary_uniedu_status&&S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.EDU_STATUS,e.primary_uniedu_status||""),n=e}),o),C.checkSave((0,l.ge)("u_university0").value)}C.initStats()},submitEducation(e=f.JoinScreenFlow.DEFAULT_FLOW){let t,n;if(cur.isSchool?(n={act:"a_save_education_school"},n=ProfileEditorEdu.addSchoolParams(n,{id:0},"school0"),n.school0school||(t=(0,m.getLang)("join_need_school")),n.school0id=-1):(n={act:"a_save_education_uni"},n=ProfileEditorEdu.addUniParams(n,{id:0},"primary_uni"),n.primary_uniuniversity||(t=(0,m.getLang)("join_need_uni")),n.primary_uniid=cur.uniId||-1),t)return S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.INCORRECT_EDUCATION,cur.eventScreen),(0,I.joinLogProgress)(w.JoinProgressLog.SCREEN_EDUCATION,w.JoinProgressLog.STATUS_ERROR,cur.isSchool?w.JoinProgressLog.ERROR_EMPTY_SCHOOL:w.JoinProgressLog.ERROR_EMPTY_UNIVERSITY),C.showMsg("join_submit_result",t),!0;const o=(0,l.ge)("join_save");n.hash=cur.saveHash;const i=new f.JoinScreenFlow(cur.eventScreen,e).nextScreen();ajax.post("al_profileEdit.php",n,{onDone:()=>{k(),S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SCREEN_PROCEED,cur.eventScreen,i.screen_to),(0,I.joinLogProgress)(w.JoinProgressLog.SCREEN_EDUCATION,w.JoinProgressLog.STATUS_SUCCESS),nav.go(i.url_to)},showProgress:()=>(0,d.lockButton)(o),hideProgress:()=>(0,d.unlockButton)(o)})},initEmail(){const e=(0,l.ge)("pedit_email");(0,_.addEvent)(e,"keydown change",(function(t){j(b.RegistrationFieldItemNames.EMAIL,(function(){S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.FIRST_EMAIL,cur.eventScreen)})),10===t.keyCode||13===t.keyCode?C.submitEmail():C.checkSave(e.value),S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.EMAIL,e.value)}));const t=document.getElementById("emailExplanationModalTrigger");cur.email_expl_box_html&&t&&(t.onclick=function(){const e=new g.MessageBox({title:"",width:450,hideButtons:!0,containerClass:"EmailExplanationBoxContainer",onHide:()=>{S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SCREEN_RETURN,b.EventScreens.REGISTRATION_EMAIL_EXPLANATION,b.EventScreens.REGISTRATION_EMAIL)}});e.content(cur.email_expl_box_html);const t=e.bodyNode.querySelector(".EmailExplanationBox__close");return t?.addEventListener("click",(()=>{e.hide()})),S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SCREEN_PROCEED,b.EventScreens.REGISTRATION_EMAIL,b.EventScreens.REGISTRATION_EMAIL_EXPLANATION),e.show(),!1}),C.checkSave(),C.initStats()},submitEmail(){let e={email:document.querySelector("#pedit_email").value.trim(),is_new:1,hash:cur.saveHash};if(!e.email)return S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.ERROR_EMPTY_EMAIL,cur.eventScreen),(0,I.joinLogProgress)(w.JoinProgressLog.SCREEN_EMAIL,w.JoinProgressLog.STATUS_ERROR,w.JoinProgressLog.ERROR_EMPTY_EMAIL),C.showMsg("join_submit_result",(0,m.getLang)("join_need_email")),!0;const t=(0,l.ge)("join_save");e.hash=cur.saveHash;const n=new f.JoinScreenFlow(cur.eventScreen,f.JoinScreenFlow.DEFAULT_FLOW).nextScreen();ajax.post("al_settings.php?act=a_bind_mail",e,{onDone:()=>{k(),S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SCREEN_PROCEED,cur.eventScreen,n.screen_to),(0,I.joinLogProgress)(w.JoinProgressLog.SCREEN_EMAIL,w.JoinProgressLog.STATUS_SUCCESS),location.href=n.url_to},onFail:e=>{if(void 0!==e){const t=void 0!==e.message?e.message:e;C.showMsg("join_submit_result",t),"ALREADY_USED"===e.code?(0,I.joinLogProgress)(w.JoinProgressLog.SCREEN_EMAIL,w.JoinProgressLog.STATUS_ERROR,w.JoinProgressLog.ERROR_EMAIL_ALREADY_USED):(0,I.joinLogProgress)(w.JoinProgressLog.SCREEN_EMAIL,w.JoinProgressLog.STATUS_ERROR,w.JoinProgressLog.ERROR_INCORRECT_EMAIL)}return!0},showProgress:()=>(0,d.lockButton)(t),hideProgress:()=>(0,d.unlockButton)(t)})},avatarSubmit(e=f.JoinScreenFlow.DEFAULT_FLOW){k();const t=new f.JoinScreenFlow(cur.eventScreen,e).nextScreen();S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SCREEN_PROCEED,cur.eventScreen,t.screen_to),(0,I.joinLogProgress)(w.JoinProgressLog.SCREEN_AVATAR,w.JoinProgressLog.STATUS_SUCCESS)},avatarSkip(e=f.JoinScreenFlow.DEFAULT_FLOW){k();const t=new f.JoinScreenFlow(cur.eventScreen,e).nextScreen();S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SCREEN_SKIP,cur.eventScreen,t.screen_to),(0,I.joinLogProgress)(w.JoinProgressLog.SCREEN_AVATAR,w.JoinProgressLog.STATUS_SKIP)},avatarError(){(0,I.joinLogProgress)(w.JoinProgressLog.SCREEN_AVATAR,w.JoinProgressLog.STATUS_ERROR,w.JoinProgressLog.ERROR_AVATAR_UPLOAD)},checkSave(e){(0,d.disableButton)((0,l.ge)("join_save"),!e)},showPolicy(e){(0,g.showBox)("al_help.php",{act:e,cc_id:cur.uiPhoneCountry.val()||0,box:1})},updatePolicyLink(e){const t=(0,l.geByClass1)("checkbox","join_accept_terms_checkbox");(0,d.checkbox)(t,0);ajax.post("join.php",{act:"update_policy",cc_id:e||0},{onDone:e=>{if(e){const t=(0,l.ge)("join_accept_terms_checkbox");if(t){const n=(0,l.geByClass1)("join_accept_terms_text",t);n&&(n.innerHTML=e)}}}})},phoneOnKeyUp(){clearTimeout(C.checkPhoneTimeout);const e=C.getPhone();e&&e!==C.prevPhone&&(e.length>4?C.checkPhoneTimeout=setTimeout((function(){ajax.post("activation.php",{act:"mrg_check_phone",phone:e,rnd:C.phoneMrgInstanceId},{onDone:t=>{C.prevPhone=e,!t&&C.defaultPhoneTip||(C.destroyPhoneTip(),t&&((0,l.ge)("join_phone_prefixed")?(0,d.notaBene)("join_phone_prefixed"):(0,d.notaBene)("join_phone"),C.defaultPhoneTip=!1))}})}),500):(C.prevPhone=e,C.defaultPhoneTip||C.destroyPhoneTip()))},destroyPhoneTip(){const e=(0,l.ge)("join_phone");e&&e.tt&&e.tt.destroy()},silentAuth(){},completeProceed(e=f.JoinScreenFlow.DEFAULT_FLOW){k();const t=new f.JoinScreenFlow(cur.eventScreen,e).nextScreen();S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SCREEN_PROCEED,cur.eventScreen,t.screen_to)},completeSkip(){k(),S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SCREEN_SKIP,cur.eventScreen),(0,I.joinLogProgress)(w.JoinProgressLog.SCREEN_DONE,w.JoinProgressLog.STATUS_SKIP)},educationSkip(e=f.JoinScreenFlow.DEFAULT_FLOW){k();const t=new f.JoinScreenFlow(cur.eventScreen,e).nextScreen();S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SCREEN_SKIP,cur.eventScreen,t.screen_to),(0,I.joinLogProgress)(w.JoinProgressLog.SCREEN_EDUCATION,w.JoinProgressLog.STATUS_SKIP)},contactsSkip(e=f.JoinScreenFlow.DEFAULT_FLOW){k();const t=new f.JoinScreenFlow(cur.eventScreen,e).nextScreen();S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SCREEN_SKIP,cur.eventScreen,t.screen_to),(0,I.joinLogProgress)(w.JoinProgressLog.SCREEN_CONTACTS,w.JoinProgressLog.STATUS_SKIP)},emailSkip(e=f.JoinScreenFlow.DEFAULT_FLOW){k();const t=new f.JoinScreenFlow(cur.eventScreen,e).nextScreen();S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SCREEN_SKIP,cur.eventScreen,t.screen_to),(0,I.joinLogProgress)(w.JoinProgressLog.SCREEN_EMAIL,w.JoinProgressLog.STATUS_SKIP)},initDone(){k(),C.initStats()},initFbDone(){},initFbStats(){cur.eventNextScreen?cur.eventCurrentScreen=cur.eventNextScreen:cur.eventCurrentScreen=b.EventScreens.OAUTH_FB,cur.eventNextScreen=void 0;const e=(0,l.isVisible)("join_phone_row"),t=(0,l.isVisible)("join_code_row"),n=(0,l.isVisible)("join_pass_row");e&&!t&&(cur.eventNextScreen=b.EventScreens.REGISTRATION_PHONE),n&&(cur.eventNextScreen=b.EventScreens.REGISTRATION_PASSWORD),e||t||n||(cur.eventNextScreen=b.EventScreens.REGISTRATION_COMPLETE),cur.eventNextScreen&&cur.eventCurrentScreen!==cur.eventNextScreen&&(S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.FACEBOOK_REGISTRATION,b.EventFieldValues.REGISTERED_VIA_FB),S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SCREEN_PROCEED,cur.eventCurrentScreen,cur.eventNextScreen))},validated(e,t){cur.fbSigned=!0,cur.fbValid=e,clearInterval(cur.checkInterval),e||(t||((0,l.show)("join_fb_mobile"),cur.mobileValidated||(0,l.hide)("join_pass_row")),cur.mobileValidated?(0,l.show)("join_pass_submit"):((0,l.hide)("join_pass_submit"),cur.mobileSelected||(0,l.show)("join_phone_submit")),(0,l.hide)("join_email_row")),C.initFbStats()},uploadPhoto(e){if(!e.pic_url)return!1;utilsNode.appendChild((0,l.ce)("iframe",{src:e.pic_url})),window.onUploadDone=function(e,t,n){(0,i.debugLog)(arguments)},window.onUploadFail=function(){(0,i.debugLog)(arguments)}},checkUser(){if(cur.requestChecking)return!1;cur.requestChecking=!0,ajax.post("/join",{act:"fb_check",validating:cur.validating?"1":""},{onDone:function(e,t){if(cur.requestChecking=!1,(0,i.debugLog)(e,t),e)if(t.failed)S.registrationItemStat&&(S.registrationItemStat.logFieldInteraction(b.RegistrationFieldItemNames.FACEBOOK_REGISTRATION,b.EventFieldValues.REGISTERED_VIA_FB),S.registrationItemStat.logEvent(b.RegistrationItemEventTypes.SCREEN_PROCEED,b.EventScreens.OAUTH_FB,b.EventScreens.FACEBOOK_REGISTRATION_FAILED,{force:!0})),(0,l.ge)("join_fb_finish").innerHTML=t.html,clearInterval(cur.checkInterval);else if(cur.validating)void 0!==t.validated&&C.validated(t.validated);else{let e=!1;(0,l.val)((0,l.ge)("quick_email"),t.email),cur.fbEmail=t.email,cur.joinParams.join_code=t.join_code,cur.joinParams.join_hash=t.join_hash,t.fb_id&&(cur.fbId=t.fb_id);let n=(0,l.ge)("join_fb_import_info");if((0,l.ge)("join_fb_info").innerHTML=t.html,void 0!==t.validated||t.login_to?C.validated(t.validated,t.login_to):cur.validating=!0,t.login_to)return(0,l.hide)("join_pass_row"),C.initFbStats(),C.submitPassword(!1,!0),nav.go("/login?email="+t.email+"&m=5"),!1;e?((0,l.show)((0,l.ge)("join_show_result")),(0,l.setStyle)((0,l.ge)("join_show_result_wrap"),{opacity:1}),(0,l.setStyle)(n,{height:0,opacity:0,marginTop:-10})):((0,l.setStyle)(n,{overflow:"hidden"}),(0,a.animate)(n,{height:0,opacity:0,marginTop:-10},{duration:200}),(0,a.animate)((0,l.ge)("join_show_result_wrap"),{opacity:1},{duration:200}),(0,a.slideDown)((0,l.ge)("join_show_result"),200)),C.uploadPhoto(t),C.initFbStats()}}})},initIndexJoinForm:function(e){const t=document.querySelector(".JoinForm");(0,E.initJoinForm)(t,{...e,ref:"index"})},initInviteJoinForm:function(e){const t=document.querySelector(".JoinForm");(0,E.initJoinForm)(t,{...e,ref:"invite"})},initJoinBox:function(e){const t=(0,h.curBox)();t.changed=!0,t.setOptions({width:560,hideButtons:!0,bodyStyle:"padding: 0"});const n=t.bodyNode.querySelector(".JoinForm");(0,E.initJoinForm)(n,{...e,ref:"box"})},initIndexJoinVKConnectButton:function(e,t){const n=document.querySelector(".JoinForm");(0,v.initJoinVKConnectButton)(n,{...e,unauthId:t})},initIndexJoinVKConnectForm:function(e,t,n,o){const i=document.querySelector(".JoinForm");(0,v.initJoinVKConnectForm)(i,{...e,unauthId:t,phonePrefix:n,hash:o})},initCommon:function(e){const{logoutLabel:t,logoutHash:n}=e,o=document.querySelector("#top_reg_link");o&&(clearTimeout(window.__joinTopTO),setTimeout((()=>{o.old=o.innerHTML,o.was=(0,l.isVisible)(o),o.innerHTML=t,o.onclick=e=>{if(cur.checkInterval&&clearInterval(cur.checkInterval),!1===(0,_.checkEvent)(e))return window.ajax.post("join.php",{act:"logout",hash:n}),(0,_.cancelEvent)(e)},(0,l.show)(o),cur.destroy.push((()=>{window.__joinTopTO=setTimeout((()=>{(0,l.val)(o,o.old),o.onclick=()=>{},o.was||(0,l.hide)(o)}),500)}))}),0)),(0,l.hide)("top_switch_lang","ts_wrap")}}},279329:(e,t,n)=>{var o,i=n(636576),r=n(212391),s=n(882838);window.vk?.stDomain&&(n.p=window.vk.stDomain+"/dist/"),window.Join=r.join,(0,s.joinAvatarRegisterApp)(r.join),(o=window.requestIdleCallback)||(o=e=>setTimeout((()=>e()),1)),o((()=>{try{(0,i.statlogsValueEvent)("entries_requests",1,"join","web")}catch{}}),{timeout:5e3});try{stManager?.done("dist/web/join.62ed7b0c.js")}catch(e){}},882838:(e,t,n)=>{n.d(t,{joinAvatarRegisterApp:()=>l});var o=n(474848),i=n(384483),r=n(296540),s=n(440961),a=n(342018),c=n(725669);const l=e=>{const t="JoinAvatar";(0,i.registerReactApplication)(t,(l=>{const d=(0,i.getReactRootEl)(t);if(!d)return;e.initStats();const u=(0,c.asyncComponent)((()=>Promise.all([n.e(91498),n.e(89631),n.e(762),n.e(79210),n.e(1742),n.e(52175),n.e(32719),n.e(18461),n.e(99684),n.e("langs/web/JoinAvatarScreen")]).then(n.bind(n,766468))),(({JoinAvatar:e})=>e));s.render((0,o.jsx)(r.Suspense,{fallback:(0,o.jsx)(o.Fragment,{}),children:(0,o.jsx)(u,{...l,setFBSign:()=>e.setFBSign(),onAvatarError:()=>e.avatarError(),avatarSkip:()=>e.avatarSkip(),avatarSubmit:()=>e.avatarSubmit()})}),d),(0,a.pushNavDestroy)((()=>d&&s.unmountComponentAtNode(d)))}))}},832677:(e,t,n)=>{n.d(t,{initJoinForm:()=>g});var o=n(683234),i=n(754866),r=n(246429),s=n(749284),a=n(560377),c=n(104522),l=n(314309),d=n(175661),u=n(952661);const _="join_form_sex";function g(e,t){const{from:n,bdateMonths:g,bdateYears:h,proceedAs:m,fbApp:p,fbState:b,fbLocale:S,ref:E,values:v={},onSignInClick:w,onNotNowClick:I}=t,f=window.cur.options||{},y=f.bday||0,R=f.bmonth||0,j=f.byear||0;let k;k="invite"===E?l.EventScreens.REGISTRATION_INVITE_CONFIRM:m?l.EventScreens.START_PROCEED_AS:"box"===E?l.EventScreens.START_BOX:l.EventScreens.START,window.cur.eventScreen=k,d.registrationItemStat.logEvent(l.RegistrationItemEventTypes.SCREEN_PROCEED,l.EventScreens.NOWHERE,k,{force:!0});const T=e.querySelector(".JoinForm__error"),C=e.querySelector('.JoinForm__textInput[name="first_name"]'),P=e.querySelector('.JoinForm__textInput[name="last_name"]'),N=e.querySelector(".JoinForm__birthdateDayInput"),F=e.querySelector(".JoinForm__birthdateMonthInput"),O=e.querySelector(".JoinForm__birthdateYearInput"),A=e.querySelector(".JoinForm__sex"),L=e.querySelectorAll(".JoinForm__sexRadio"),D=e.querySelector(".JoinForm__birthdate"),x=e.querySelector(".JoinForm__submitButton"),M=e.querySelector(".JoinForm__facebookLogin"),B=e.querySelector(".JoinForm__facebookLogin .FacebookLogin__button"),U=e.querySelector(".JoinForm__signIn"),J=e.querySelector(".JoinForm__notNowLink");let q,V,H;if(!C||!P||!x)return;const Y=()=>{if(u.FlatButton.isLocked(x))return;const e={fname:C.value.trim(),lname:P.value.trim(),bday:q.val(),bmonth:V.val(),byear:H.val(),from:n,frm:1,event_screen:k};(0,i.isVisible)(A)&&(e.sex=Number((0,o.radioval)(_))||0),window.tooltips&&window.tooltips.hideAll();const t=(e,t)=>{e&&t&&window.Index.showRegTT(e,t)};T&&(T.innerHTML=""),window.ajax.post("join.php?act=start",e,{onDone:(e,n)=>{switch(e){case"first_name":return t(C,n),void(0,o.notaBene)(C);case"last_name":return t(P,n),void(0,o.notaBene)(P);case"sex_row":return(0,i.show)(A),void t(A,n);case"birthdate_row":return void t(D,n)}n&&(0,a.showMsg)(T,n,"error",!0)},showProgress:()=>u.FlatButton.lock(x),hideProgress:()=>u.FlatButton.unlock(x)})},G=()=>{const e=Number(q.val())||0,t=Number(V.val())||0,n=Number(H.val())||0,o=new Date(0);e&&o.setDate(e),t&&o.setMonth(t),n&&o.setFullYear(n),d.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.BDAY,o.getTime().toString())},K=function(){const e=window.cur;e.isJoinFieldDirty||(d.registrationItemStat.logEvent(l.RegistrationItemEventTypes.START_REG_TAP,e.eventScreen,void 0,{force:!0}),e.isJoinFieldDirty=!0)};if(d.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.FIRST_NAME,C.value,!0),C.addEventListener("keyup",(()=>{K(),d.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.FIRST_NAME,C.value)})),d.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.LAST_NAME,P.value,!0),P.addEventListener("keyup",(()=>{K(),d.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.LAST_NAME,P.value)})),[C,P].forEach((e=>{(0,s.placeholderInit)(e),e.addEventListener("keydown",(e=>{10!==e.keyCode&&13!==e.keyCode||Y()}))})),"index"!==E&&requestAnimationFrame((()=>(0,i.elfocus)(C))),d.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.BDAY,"",!0),q=new window.Dropdown(N,(0,c.generateDays)(j,R),{big_text:!0,multiselect:!1,zeroPlaceholder:!0,selectedItems:y,onChange:()=>{K(),G()}}),V=new window.Dropdown(F,g,{big_text:!0,multiselect:!1,zeroPlaceholder:!0,selectedItems:R,onChange:e=>{K(),G(),(0,c.updateDayDropdown)(H.val(),e,q,y)}}),H=new window.Dropdown(O,h,{big_text:!0,multiselect:!1,zeroPlaceholder:!0,selectedItems:j,onChange:e=>{K(),G(),(0,c.updateDayDropdown)(e,V.val(),q,y)}}),window.radioBtns[_]={els:[...L],val:0},d.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.SEX,Number((0,o.radioval)(_)).toString(),!0),L.forEach((e=>{e.addEventListener("click",(()=>{const t=Number(e.dataset.sex);(0,o.radiobtn)(e,t,_),K(),d.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.SEX,t.toString())}))})),void 0!==v.sex){const t=v.sex,n=e.querySelector(`.JoinForm__sexRadio[data-sex="${t}"]`);n&&n.click()}if(x.addEventListener("click",(e=>{e.preventDefault(),Y()})),p){const e=window.cur;e.fbApp=p,e.fbState=b,e.fbLocale=S,window.Index.fbCheck(p,"",M)}B?.addEventListener("click",(e=>{e.preventDefault(),window.Index.fbJoin("",B)})),U&&w&&U.addEventListener("click",w),J&&I&&J.addEventListener("click",I);const W=(0,r.curBox)();W&&W.setOptions({onClean:()=>{q&&q.destroy(),V&&V.destroy(),H&&H.destroy()}}),window.stManager.add([window.jsc("web/tooltips.js"),"tooltips.css"]).catch((()=>{}))}},961678:(e,t,n)=>{n.d(t,{JoinProgressLog:()=>o});const o={SCREEN_CONTACTS:"contacts",SCREEN_FINISH:"finish",SCREEN_EDUCATION:"education",SCREEN_EMAIL:"email",SCREEN_AVATAR:"registration_photo",STATUS_ERROR:"error",STATUS_SUCCESS:"success",STATUS_SKIP:"skip",ERROR_PASSWORD:"password error",ERROR_EMPTY_CONTACTS:"empty contacts",ERROR_EMPTY_SCHOOL:"empty school",ERROR_EMPTY_UNIVERSITY:"empty university",ERROR_EMPTY_EMAIL:"empty email",ERROR_INCORRECT_EMAIL:"incorrect email",ERROR_EMAIL_ALREADY_USED:"phone already used",ERROR_AVATAR_UPLOAD:"avatar upload error"}},510973:(e,t,n)=>{n.d(t,{JoinScreenFlow:()=>s});var o=n(314309);const i={url_to:"/feed"},r={usual:{[o.EventScreens.REGISTRATION_COUNTRY]:{screen_to:o.EventScreens.REGISTRATION_EDUCATION,url_to:"/join?act=education"},[o.EventScreens.REGISTRATION_EDUCATION]:{screen_to:o.EventScreens.REGISTRATION_EMAIL,url_to:"/join?act=email"},[o.EventScreens.REGISTRATION_EMAIL]:{screen_to:o.EventScreens.REGISTRATION_PHOTO,url_to:"/join?act=avatar"},[o.EventScreens.REGISTRATION_PHOTO]:{url_to:"/feed"}},email_test:{[o.EventScreens.REGISTRATION_EMAIL]:{screen_to:o.EventScreens.REGISTRATION_COUNTRY,url_to:"/join?act=contacts"},[o.EventScreens.REGISTRATION_COUNTRY]:{screen_to:o.EventScreens.REGISTRATION_EDUCATION,url_to:"/join?act=education"},[o.EventScreens.REGISTRATION_EDUCATION]:{url_to:"/feed"}}};class s{nextScreen(){return this.screen_flow[this.current_screen]??i}constructor(e,t=s.DEFAULT_FLOW){this.current_screen=e,this.screen_flow_variant=t,this.screen_flow=r[this.screen_flow_variant]}}s.DEFAULT_FLOW="usual"},152420:(e,t,n)=>{n.d(t,{joinLogProgress:()=>i});var o=n(636576);function i(e,t,n){(0,o.statlogsValueEvent)("join_progress",e,t,n)}}},l={};function __webpack_require__(e){var t=l[e];if(void 0!==t)return t.exports;var n=l[e]={exports:{}};return c[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=c,e=[],__webpack_require__.O=(t,n,o,i)=>{if(!n){var r=1/0;for(l=0;l<e.length;l++){for(var[n,o,i]=e[l],s=!0,a=0;a<n.length;a++)(!1&i||r>=i)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](n[a])))?n.splice(a--,1):(s=!1,i<r&&(r=i));if(s){e.splice(l--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,o,i]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var i=Object.create(null);__webpack_require__.r(i);var r={};t=t||[null,n({}),n([]),n(n)];for(var s=2&o&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,__webpack_require__.d(i,r),i},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>24639===e?"web/chunks/plugins_maps_mmrgl_script_chunk.158e8027.js":30685===e?"web/chunks/plugins_maps_mmrgl_style_chunk.a80ac90e.js":45458===e?"web/chunks/hls.51276d4c.js":1742===e?"web/chunks/dab08718.async.5b6f8ca1.js":15757===e?"web/chunks/75255e78.async.460049f9.js":18461===e?"web/chunks/e9aa2378.async.bb17db1d.js":9217===e?"web/chunks/1981a84c.async.27e1505a.js":32415===e?"web/chunks/b1538c11.async.5bd5e162.js":77822===e?"web/chunks/72054f47.async.a91c7017.js":78329===e?"web/chunks/93c42357.async.7787752c.js":77474===e?"web/chunks/5149ea20.async.206f6eea.js":91696===e?"web/chunks/daa1f875.async.fcda6d0f.js":34190===e?"web/chunks/audio_config_legacy.c80de1a4.js":52175===e?"web/chunks/29856ecf.async.07f9febb.js":32719===e?"web/chunks/e6af87d5.async.e25a777c.js":18586===e?"web/chunks/audio_config_overrides.dda9547c.js":98271===e?"web/chunks/audio_web_globalPlayerImpl.3a46a95b.js":30072===e?"web/chunks/showCaptchaPopup.8ca5ff8e.js":47135===e?"web/chunks/audio_onMediaAttachmentPlayer.2b46a56d.js":19072===e?"web/chunks/left_menu_store.597e85a2.js":42255===e?"web/chunks/wikiModalExampleInitiator.96da6269.js":64436===e?"web/chunks/c668a5a9.async.32c0b750.js":56965===e?"web/chunks/stories_web_lib.e6740130.js":42943===e?"web/chunks/video_web_lib.c3d8beff.js":53927===e?"web/chunks/questions_boxes_web.22d497e3.js":74336===e?"web/chunks/show_audio_playlist.90c6ba0e.js":82002===e?"web/chunks/6cdc4a84.async.c3e10f2b.js":10774===e?"web/chunks/show_attachment_audio_list.081df70a.js":66424===e?"web/chunks/16afc866.async.ce974016.js":99626===e?"web/chunks/9683cb33.async.c89748ed.js":21771===e?"web/chunks/d2bb7ad4.async.2aaf08c7.js":17895===e?"web/chunks/money_transfer_box.afa81e90.js":50905===e?"web/chunks/money_transfer.5688aa3b.js":69026===e?"web/chunks/1a4fbe5c.async.024a283a.js":6827===e?"web/chunks/podcasts_web.6359f93b.js":18782===e?"web/chunks/b4847c21.async.2c0febee.js":60205===e?"web/chunks/0dd14e79.async.bd864de9.js":98641===e?"web/chunks/3d9cdf8c.async.48c67850.js":85517===e?"web/chunks/509bc911.async.2c8d9125.js":55009===e?"web/chunks/6629858b.async.6bf199e7.js":70408===e?"web/chunks/1a92c3d4.async.6cb08b64.js":11156===e?"web/chunks/dfd18190.async.266b2c5b.js":24950===e?"web/chunks/a15147e3.async.52bc6f4b.js":81661===e?"web/chunks/b283cabe.async.bc9dc82f.js":84835===e?"web/chunks/unauth_action_box.5405f5fd.js":6086===e?"web/chunks/MiniAppsLifecycle.2f1f84a6.js":27561===e?"web/chunks/552aa558.async.1ee13759.js":7628===e?"web/chunks/264485a7.async.65e68210.js":59886===e?"web/chunks/StoryPublisherV2.66fde211.js":68425===e?"web/chunks/sticker-gift-modal-legacy.1f20be64.js":73214===e?"web/chunks/SilentModeForms.a1d24c6f.js":52007===e?"web/chunks/gift-modal-legacy.0660c628.js":85247===e?"web/chunks/5746069a.async.c5d02ace.js":5850===e?"web/chunks/3ad51ec5.async.79e33f69.js":2166===e?"web/chunks/showDonutSubscriptionModal.bf97fc66.js":73712===e?"web/chunks/7376a2e6.async.bfeca96b.js":4752===e?"web/chunks/c4851f31.async.10529862.js":29311===e?"web/chunks/feed-client-nav-skeleton.4358a138.js":56091===e?"web/chunks/feed-client-nav-async-right-block.64eee7ea.js":99684===e?"web/chunks/JoinAvatarScreen.b56a274a.js":31598===e?"web/chunks/171e564d.async.2141f0ef.js":74705===e?"web/chunks/19677f5c.async.58b2f90e.js":33847===e?"web/chunks/85f4c8f2.async.ffad2eb2.js":29669===e?"web/chunks/2ad96512.async.f58e3ea9.js":36502===e?"web/chunks/NewStickerPicker.8bf22ddf.js":88651===e?"web/chunks/bookmarkClipPost.de98f131.js":1715===e?"web/chunks/AudioLongtapModal.602584fa.js":74402===e?"web/chunks/fdc22ab7.async.b33d67c9.js":10447===e?"web/chunks/1d84b2d5.async.b2c9cbdf.js":75908===e?"web/chunks/6016368a.async.daac3497.js":33641===e?"web/chunks/audio_modals_MusicTrackList.5634f81c.js":51713===e?"web/chunks/voice_message_player.a6631853.js":9925===e?"web/chunks/speech.61ec51e3.js":12334===e?"web/chunks/stories-perf-metrics.a7e3d95a.js":60191===e?"web/chunks/stories_viewer.e1ba2faf.js":16433===e?"web/chunks/5e9df32f.async.c6525621.js":87548===e?"web/chunks/c8c8e70a.async.65bdb437.js":51943===e?"web/chunks/VideoUpload.fc037a95.js":31095===e?"web/chunks/PodcastEpisodeModal.df732a38.js":29360===e?"web/chunks/dbac3ddf.async.c79a1278.js":10504===e?"web/chunks/StoriesCreatorVKApp.533836dd.js":17148===e?"web/chunks/CommunityPage_DonutBanner.e4686119.js":95991===e?"web/chunks/CommunityPage_LevelsAdminOnboarding.cb3981e1.js":85386===e?"web/chunks/donut_modals.d6f1afe7.js":43162===e?"web/chunks/framer-motion-entrypoint.565434fd.js":54833===e?"web/chunks/performance-stats.9f8cb382.js":25153===e?"web/chunks/"+e+".48cd7798.js":17356===e?"web/chunks/videoplayer-interactive.ee84d9df.js":9635===e?"web/chunks/9635.4e1d9901.js":50196===e?"web/chunks/3667f9fb.async.947a550c.js":32643===e?"web/chunks/story_blocks.85fa14e7.js":35164===e?"web/chunks/df43ae8f.async.723747fc.js":58459===e?"web/chunks/MiniApp.ce0196a2.js":66434===e?"web/chunks/ReportsProfileModal.feb47a08.js":99595===e?"web/chunks/ReportForm.e79c83ef.js":7894===e?"web/chunks/StickersKit-AgeRestrictionModal.c95bb88f.js":99370===e?"web/chunks/VideoEditorModal.f5794593.js":95805===e?"web/chunks/PublishClipToVideoModal.74c4aa28.js":93231===e?"web/chunks/9b163902.async.8f24cafd.js":32937===e?"web/chunks/89b67a05.async.89d1af06.js":91906===e?"web/chunks/VideoUploadModal.0d0ad510.js":74205===e?"web/chunks/VideoExternalUploadModal.eac92db8.js":37628===e?"web/chunks/48277d49.async.967a87b8.js":47317===e?"web/chunks/b8d852ba.async.223e21a3.js":36637===e?"web/chunks/ClipUploadModal.4a42341b.js":75090===e?"web/chunks/video_upload_modal.4fa8fa04.js":18493===e?"web/chunks/AddClipToVideoBlock.3bc2cbed.js":56560===e?"web/chunks/CreateVideoChannelModal.33046eda.js":40953===e?"web/chunks/AddClipToVideoModal.e60be012.js":60274===e?"web/chunks/ClipPlayerModule.33ea89e0.js":75477===e?"chunks/"+e+".1122a378.js":16848===e?"chunks/"+e+".07f89a20.js":77955===e?"chunks/"+e+".51a5dd99.js":30420===e?"chunks/"+e+".2092e10d.js":{762:"web/chunks/state-management",63616:"web/chunks/draggable",79210:"web/chunks/audioplayer-lib",99364:"web/chunks/palette"}[e]+"."+{762:"a047c2f5",63616:"d59c2db3",79210:"baff7142",99364:"1fddc9f9"}[e]+".js",__webpack_require__.miniCssF=e=>30685===e?"web/chunks/d5a750da.css":{18586:1,98271:1,74336:1,17895:1,50905:1,6827:1}[e]?"web/chunks/7fd8420b.css":30072===e?"web/chunks/65e91a02.css":84835===e?"web/chunks/4f1d65d4.css":59886===e?"web/chunks/59bb9b9f.css":73214===e?"web/chunks/06964372.css":2166===e?"web/chunks/58fa3c10.css":{29311:1,56091:1}[e]?"web/chunks/4e9f04d5.css":99684===e?"web/chunks/7fbe03ee.css":36502===e?"web/chunks/4729450e.css":1715===e?"web/chunks/93a69fb3.css":51943===e?"web/chunks/c50c0f1e.css":10504===e?"web/chunks/391c2b40.css":17148===e?"web/chunks/09ef35c7.css":85386===e?"web/chunks/62c2c162.css":32643===e?"web/chunks/c637fa5f.css":66434===e?"web/chunks/219755d2.css":99595===e?"web/chunks/fe3440f9.css":7894===e?"web/chunks/4f77e6e1.css":99370===e?"web/chunks/19fddb9e.css":95805===e?"web/chunks/f4631884.css":73509===e?"web/chunks/c9f40f81.css":{91906:1,74205:1}[e]?"web/chunks/155bafb8.css":36637===e?"web/chunks/c2eef16f.css":75090===e?"web/chunks/d872e4d2.css":18493===e?"web/chunks/6278dd5c.css":40953===e?"web/chunks/b199d83c.css":60274===e?"web/chunks/ff3a19b0.css":79210===e?"web/chunks/audioplayer-lib.2591edb3.css":void 0,__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},__webpack_require__.l=(e,t,n,i)=>{if(o[e])o[e].push(t);else{var r,s;if(void 0!==n)for(var a=document.getElementsByTagName("script"),c=0;c<a.length;c++){var l=a[c];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")=="vk:"+n){r=l;break}}r||(s=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,__webpack_require__.nc&&r.setAttribute("nonce",__webpack_require__.nc),r.setAttribute("data-webpack","vk:"+n),r.src=e),o[e]=[t];var d=(t,n)=>{r.onerror=r.onload=null,clearTimeout(u);var i=o[e];if(delete o[e],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach((e=>e(n))),t)return t(n)},u=setTimeout(d.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=d.bind(null,r.onerror),r.onload=d.bind(null,r.onload),s&&document.head.appendChild(r)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/dist/",i=__webpack_require__.u,r=__webpack_require__.e,s={},a={},__webpack_require__.u=function(e){return i(e)+(s.hasOwnProperty(e)?"?"+s[e]:"")},__webpack_require__.e=function(e){return r(e).catch((function(t){var n=a.hasOwnProperty(e)?a[e]:3;if(n<1){var o=i(e);throw t.message="Loading chunk "+e+" failed after 3 retries.\n("+o+")",t.request=o,t}return new Promise((function(t){var o,i=3-n+1;setTimeout((function(){var o="cache-bust=true&retry-attempt="+i;s[e]=o,a[e]=n-1,t(__webpack_require__.e(e))}),(o=i,1e3*Math.pow(3,o)))}))}))},(()=>{if("undefined"!=typeof document){var e=e=>new Promise(((t,n)=>{var o=__webpack_require__.miniCssF(e),i=__webpack_require__.p+o;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var i=(s=n[o]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(i===e||i===t))return s}var r=document.getElementsByTagName("style");for(o=0;o<r.length;o++){var s;if((i=(s=r[o]).getAttribute("data-href"))===e||i===t)return s}})(o,i))return t();((e,t,n,o,i)=>{var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",__webpack_require__.nc&&(r.nonce=__webpack_require__.nc),r.onerror=r.onload=n=>{if(r.onerror=r.onload=null,"load"===n.type)o();else{var s=n&&n.type,a=n&&n.target&&n.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+s+": "+a+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=s,c.request=a,r.parentNode&&r.parentNode.removeChild(r),i(c)}},r.href=t,n?n.parentNode.insertBefore(r,n.nextSibling):document.head.appendChild(r)})(e,i,null,t,n)})),t={73410:0};__webpack_require__.f.miniCss=(n,o)=>{t[n]?o.push(t[n]):0!==t[n]&&{1715:1,2166:1,6827:1,7894:1,10504:1,17148:1,17895:1,18493:1,18586:1,29311:1,30072:1,30685:1,32643:1,36502:1,36637:1,40953:1,50905:1,51943:1,56091:1,59886:1,60274:1,66434:1,73214:1,73509:1,74205:1,74336:1,75090:1,79210:1,84835:1,85386:1,91906:1,95805:1,98271:1,99370:1,99595:1,99684:1}[n]&&o.push(t[n]=e(n).then((()=>{t[n]=0}),(e=>{throw delete t[n],e})))}}})(),(()=>{__webpack_require__.b=document.baseURI||self.location.href;var e={73410:0};__webpack_require__.f.j=(t,n)=>{var o=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else if(/^(1(0(447|504|774)|7(148|15|356|42|895)|8(461|493|586|782)|1156|2334|5757|6433|9072)|2(1(529|66|771)|9(311|360|669)|7[15]61|3592|4639|4950|5153)|3(2(415|643|719|937)|0072|0685|1095|1598|3641|3847|4190|5164|6502|6637|7628)|4(7(135|317|52)|0953|2255|2943|3162|4091|5458)|5(0(196|560|905)|6(091|560|965)|(171|194|483)3|2007|2175|3927|5009|8459|850|9886)|6(0(191|205|274|86)|64[23]4|(361|443|902)6|827|8425)|7(3(214|410|712)|4([27]05|336|402)|62(|8)|(04|59)08|5090|7474|7822|8329|894|9210)|8(5(172|247|386|517)|(166|865|963)1|2002|4835|7548)|9(1(498|696|906)|9(25|364|370|595|626|684)|(323|599|827|864)1|217|5805|635))$/.test(t)){var i=new Promise(((n,i)=>o=e[t]=[n,i]));n.push(o[2]=i);var r=__webpack_require__.p+__webpack_require__.u(t),s=new Error;__webpack_require__.l(r,(n=>{if(__webpack_require__.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",s.name="ChunkLoadError",s.type=i,s.request=r,o[1](s)}}),"chunk-"+t,t)}else e[t]=0},__webpack_require__.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[r,s,a]=n,c=0;if(r.some((t=>0!==e[t]))){for(o in s)__webpack_require__.o(s,o)&&(__webpack_require__.m[o]=s[o]);if(a)var l=a(__webpack_require__)}for(t&&t(n);c<r.length;c++)i=r[c],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return __webpack_require__.O(l)},n=self.webpackChunkvkweb=self.webpackChunkvkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{var e={},t={podcasts_web:"e84f8ffe967ca683",bookmarkClipPost:"f980fda40f715b2d",audio_config_legacy:"179b3adbfe33b0d0",audio_config_overrides:"20770dc70847895d",audio_web_globalPlayerImpl:"b1026830a6e57904",showCaptchaPopup:"e86b83afe8d0a9fc",wikiModalExampleInitiator:"be30e82edc1853fe",stories_web_lib:"379eee47f5439239",video_web_lib:"add78c214815e71f",show_audio_playlist:"493523afceb96111",show_attachment_audio_list:"965296dd1fec15ee",money_transfer_box:"9a090cb97036f700",money_transfer:"9c4c01e296336e41",unauth_action_box:"78747ff4f64c4cdd",StoryPublisherV2:"31ef4adc39c4812b",SilentModeForms:"c62172e8ae356a01",showDonutSubscriptionModal:"b71d34a006029c98","feed-client-nav-skeleton":"20ded5830468e470","feed-client-nav-async-right-block":"20ded5830468e470",AudioLongtapModal:"5f832e7e10dfd391",audio_modals_MusicTrackList:"7e37e7d6dae3559e",voice_message_player:"ec13f21bcd563119",speech:"ced1158c62668239",MiniApp:"6ea1298a5fc8be52",ReportsProfileModal:"23579a018d596229",ReportForm:"6e4441cec6a06822",VideoUpload:"5c9002053bd533b1",NewStickerPicker:"ec20814bc4e8518e",stories_viewer:"be30e82edc1853fe",CommunityPage_DonutBanner:"67a900d1e6df1c69",CommunityPage_LevelsAdminOnboarding:"1dfa647cdd2fea43",donut_modals:"d778cc253b59d70b","framer-motion-entrypoint":"be30e82edc1853fe",VideoEditorModal:"fa1386d0a1195ea5",story_blocks:"265767eb0fbd7d3c","StickersKit-UGCManagementRestrictedModal":"be30e82edc1853fe","StickersKit-AgeRestrictionModal":"be30e82edc1853fe","StickersKit-ChatRestrictionModal":"be30e82edc1853fe",JoinAvatarScreen:"c73571ac8b62591d",PodcastEpisodeModal:"4a8e4e14e18c895c",CreateVideoChannelModal:"ccf65520b8d2b8b3",sharedVideoUploadState:"ec53f528d2788b87",PublishClipToVideoModal:"fd7f38b760e09d53",VideoUploadModal:"d02797dee5e58bfa",VideoExternalUploadModal:"d02797dee5e58bfa",ClipUploadModal:"00507f6400a257a5",video_upload_modal:"848bd591d40251b6",AddClipToVideoBlock:"3db135e76479446f",AddClipToVideoModal:"c5f760b8814e4759",StoriesCreatorVKApp:"47c6aa95b0759522"};__webpack_require__.f.vkLangs=(n,o)=>{if("string"==typeof n&&n.startsWith("langs/web/")){var i=t[n.replace("langs/web/","")];if(i){var r=__webpack_require__.o(e,n)?e[n]:void 0;if(0!==r)if(r)o.push(r[2]);else{var s=new Promise(((t,o)=>r=e[n]=[t,o]));o.push(r[2]=s);var a="?v="+(window.vk&&window.vk.cfg?window.vk.cfg.langs_force_version:0)+"&p=web&l="+window.vk.lang||"",c=self.location.origin+/js/+n+"."+i+".js"+a,l=new Error;__webpack_require__.l(c,(t=>{if(__webpack_require__.o(e,n)&&(0!==(r=e[n])&&(e[n]=void 0),r)){r[0]();var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading lang "+n+" failed.\n("+o+": "+i+")",l.name="LangLoadError",l.type=o,l.request=i,setTimeout((()=>{throw l}),0)}}),"lang-"+n)}}}};var n=self.langChunkLoadingGlobal||(e=>self.addLangKeys(e[1]));self.langChunkLoadingGlobal=((t,n)=>{var[o]=n;t&&t(n),__webpack_require__.o(e,o)&&e[o]&&e[o][0](),e[o]=0}).bind(null,n)})();var d=__webpack_require__.O(void 0,[91498,89631,50560,85172,21529,23592,27161,44091],(()=>__webpack_require__(279329)));d=__webpack_require__.O(d)})();