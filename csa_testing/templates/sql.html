<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL-инъекции: что это и как защититься</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 20px;
            padding: 0;
            background-color: #f9f9f9;
            color: #333;
        }
        h1 {
            color: #2c3e50;
        }
        h2 {
            color: #34495e;
        }
        p {
            margin-bottom: 15px;
        }
        ul, ol {
            margin-bottom: 15px;
            padding-left: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .tip {
            background-color: #e8f5e9;
            padding: 10px;
            border-left: 4px solid #4caf50;
            margin-bottom: 15px;
            border-radius: 4px;
        }
        .warning {
            background-color: #ffebee;
            padding: 10px;
            border-left: 4px solid #f44336;
            margin-bottom: 15px;
            border-radius: 4px;
        }
        .code {
            background-color: #f5f5f5;
            padding: 10px;
            border-left: 4px solid #2196F3;
            margin-bottom: 15px;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        button {
            background-color: #4caf50;
            border: none;
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            color: white;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
        button:hover {
            background-color: #45a049;
        }
        .demo-section {
            margin: 30px 0;
            padding: 20px;
            background-color: #f0f7fa;
            border-radius: 8px;
        }
        #sql-results {
            margin-top: 20px;
            padding: 15px;
            background-color: #e8eaf6;
            border-radius: 5px;
            border: 1px solid #c5cae9;
            min-height: 50px;
        }
        #sql-query {
            padding: 10px;
            font-size: 16px;
            width: 70%;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th {
            background-color: #e1bee7;
            border: 1px solid #ce93d8;
            padding: 8px;
            text-align: left;
        }
        td {
            border: 1px solid #ce93d8;
            padding: 8px;
        }
        .error {
            color: #f44336;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>SQL-инъекции: что это и как защититься</h1>
        <p>SQL-инъекция — это один из самых опасных видов атак на веб-приложения, который позволяет злоумышленнику вмешиваться в запросы, которые приложение отправляет в базу данных.</p>

        <h2>Как работают SQL-инъекции:</h2>
        <ol>
            <li><strong>Нахождение уязвимости:</strong> Атакующий ищет поля ввода (логины, поисковые строки), которые не защищены от SQL-кода.</li>
            <li><strong>Внедрение кода:</strong> Вместо ожидаемых данных (например, имени пользователя) вводится фрагмент SQL-кода.</li>
            <li><strong>Исполнение кода:</strong> Если приложение уязвимо, база данных выполняет этот код, что может привести к:
                <ul>
                    <li>Краже данных</li>
                    <li>Изменению или удалению информации</li>
                    <li>Получению контроля над сервером</li>
                </ul>
            </li>
        </ol>

        <div class="code">
Пример уязвимого кода:
SELECT * FROM users WHERE username = '$username' AND password = '$password'

Если ввести в поле логина: ' OR '1'='1'--
Запрос превратится в:
SELECT * FROM users WHERE username = '' OR '1'='1'-- ' AND password = '$password'
        </div>

        <div class="warning">
            <h2>Примеры опасных SQL-инъекций:</h2>
            <ul>
                <li><strong>Обход аутентификации:</strong> ' OR '1'='1</li>
                <li><strong>Извлечение данных:</strong> ' UNION SELECT username, password FROM users--</li>
                <li><strong>Изменение данных:</strong> '; UPDATE users SET password = 'hacked' WHERE username = 'admin'--</li>
                <li><strong>Удаление данных:</strong> '; DROP TABLE users--</li>
            </ul>
        </div>

        <div class="tip">
            <h2>Как защититься от SQL-инъекций:</h2>
            <ul>
                <li><strong>Используйте подготовленные запросы (prepared statements):</strong> Это самый надежный способ защиты.</li>
                <li><strong>Экранируйте специальные символы:</strong> Хотя это менее надежно, чем prepared statements.</li>
                <li><strong>Применяйте принцип минимальных привилегий:</strong> У учетной записи БД должны быть только необходимые права.</li>
                <li><strong>Валидируйте входные данные:</strong> Проверяйте тип, длину, формат и диапазон значений.</li>
                <li><strong>Используйте ORM:</strong> Современные фреймворки часто предоставляют защиту "из коробки".</li>
            </ul>
        </div>

        <div class="warning">
                <h2>Демонстрация (только для обучения!)</h2>
                <p>Эта демонстрация работает на специально созданном уязвимом сервере. Никогда не пробуйте подобные атаки на реальных сайтах!</p>
                <a href="{% url 'login_sql' %}"><button onclick="executeQuery()">Попробовать</button></a>
                <h2>Важно!</h2>
                <p>Эта демонстрация создана исключительно в образовательных целях. Использование SQL-инъекций против систем без разрешения является незаконным и может привести к уголовной ответственности.</p>
            </div>
        </div>

        <a href="{% url 'buttons_page' %}"><button>Назад</button></a>
    </div>


</body>
</html>